<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>eLRS Front End</title>
<!-- write your code here -->
<script>
</script>
<!-- write your code here -->
</head>
<body>

  <h1>eLRS Front End Demo</h1>
  <p>This eLRS tool can accept coordinates in four different formats:</p>
    <ul>
      <li>Lat, Lon</li>
      <li>RouteID (Route Name), Reference Marker, and Displacement</li>
      <li>RouteID (Route Name), And Distance from Origin</li>
      <li>CSJ And Mile Point Measure</li>
    </ul>

  <p>NOTE: This webpage does not have any data validation for text fields yet.</p>

  <h2>Query by Lat Lon</h2>
    <form>
      <label for="lat">Latitude:</label><br>
      <input type="text" id="lat" name="lat"><br>
      <p id="show_lat"></p><br>

      <label for="lon">Longitude:</label><br>
      <input type="text" id="lon" name="lon"><br>
      <p id="show_lon"></p><br>

    </form>

  <h2>Query by Route Name</h2>
  <form>
    <label for="routeid">RouteID (Route Name):</label><br>
    <input type="text" id="routeid" name="routeid"><br>
    <p id="show_routeid"></p><br><br>

    <label for="refmarker">Reference Marker:</label><br>
    <input type="text" id="refmarker" name="refmarker"><br>
    <p id="show_refmarker"></p><br><br>

    <label for="displacement">Displacement:</label><br>
    <input type="text" id="displacement" name="displacement"><br>
    <p id="show_displacement"></p><br><br>

    <label for="dfo">Distance from Origin:</label><br>
    <input type="text" id="dfo" name="dfo"><br>
    <p id="show_dfo"></p><br><br>

  </form>

  <h2>Query by CSJ</h2>
  <form>
    <label for="csj">CSJ:</label><br>
    <input type="text" id="csj" name="csj"><br>
    <p id="show_csj"></p><br><br>

    <label for="mpm">Mile Point Measure:</label><br>
    <input type="text" id="mpm" name="mpm"><br>
    <p id="show_mpm"></p><br><br>

  </form>


  <button type="button" onclick="myFunction()">Return Results</button><br><br>
  <button type="button" onclick="myFunction2()">Show Results</button><br><br>
  <p id="show_result"></p><br><br>

  <iframe src="https://grid-sys.us-e1.cloudhub.io/api/elrs1?Lat=29.39780972&Lon=-94.98759004" id="elrs_frame"></iframe>



  <script>
    function myFunction() {
        var lat = document.getElementById("lat").value;
        document.getElementById("show_lat").innerHTML = lat;
        var lon = document.getElementById("lon").value;
        document.getElementById("show_lon").innerHTML = lon;

        var routeid = document.getElementById("routeid").value;
        document.getElementById("show_routeid").innerHTML = routeid;
        var refmarker = document.getElementById("refmarker").value;
        document.getElementById("show_refmarker").innerHTML = refmarker;
        var displacement = document.getElementById("displacement").value;
        document.getElementById("show_displacement").innerHTML = displacement;
        var dfo = document.getElementById("dfo").value;
        document.getElementById("show_dfo").innerHTML = dfo;

        var csj = document.getElementById("csj").value;
        document.getElementById("show_csj").innerHTML = csj;
        var mpm = document.getElementById("mpm").value;
        document.getElementById("show_mpm").innerHTML = mpm;

        var basepath = "https://grid-sys.us-e1.cloudhub.io/api/"
        var elrs1 = basepath + "elrs1?Lat=" + lat + "&Lon=" + lon
        var elrs2 = basepath + "elrs2?RouteID=" + routeid + "&ReferenceMarker=" + refmarker + "&Displacement=" + displacement
        var elrs4 = basepath + "elrs4?RouteID=" + routeid + "&DistanceFromOrigin=" + dfo
        var elrs3 = basepath + "elrs3?ControlSectionNumber=" + csj + "&MilePointMeasure=" + mpm
    }

    function myFunction2() {
      var iframe = document.getElementById('elrs_frame');
      var iframeDocument = iframe.contentDocument || iframe.contentWindow.document;
      var iframeContent = iframeDocument.getElementById('frameBody');
      console.log(iframeContent);
      document.getElementById("show_result").innerHTML = iframeContent;
    }



//https://stackoverflow.com/questions/4728520/get-innerhtml-from-external-page-with-javascript

//https://grid-sys.us-e1.cloudhub.io/api/elrs1?Lat=29.39780972&Lon=-94.98759004
//https://grid-sys.us-e1.cloudhub.io/api/elrs2?RouteID=IH0010-KG&ReferenceMarker=476&Displacement=4
//https://grid-sys.us-e1.cloudhub.io/api/elrs3?ControlSectionNumber=LY7609&MilePointMeasure=.2
//https://grid-sys.us-e1.cloudhub.io/api/elrs4?RouteID=IH0010-KG&DistanceFromOrigin=.5


  </script>


</body>
</html>
